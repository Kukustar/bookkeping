(function(e){function t(t){for(var r,o,u=t[0],i=t[1],s=t[2],p=0,d=[];p<u.length;p++)o=u[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(d.length)d.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,u=1;u<n.length;u++){var i=n[u];0!==a[i]&&(r=!1)}r&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},c=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var l=i;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"01fb":function(e,t,n){"use strict";n("7ccc")},"0249":function(e,t,n){},1043:function(e,t,n){},2583:function(e,t,n){},3049:function(e,t,n){"use strict";n("b193")},"3a85":function(e,t,n){"use strict";n("0249")},"3fa2":function(e,t,n){"use strict";n("b42a")},"50fe":function(e,t,n){"use strict";n("f695")},"55f6":function(e,t,n){"use strict";n("f7a86")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a=(n("9911"),{key:1,style:{width:"48px"}}),c={class:"container"},o=["onClick"],u={class:"container-footer"};function i(e,t,n,i,s,l){var p=this,d=Object(r["J"])("v-app-bar-nav-icon"),f=Object(r["J"])("VAppBarTitle"),b=Object(r["J"])("v-app-bar"),h=Object(r["J"])("v-navigation-drawer"),m=Object(r["J"])("router-view"),O=Object(r["J"])("v-container"),j=Object(r["J"])("v-main"),v=Object(r["J"])("v-app");return Object(r["D"])(),Object(r["i"])(v,{style:{"background-color":"#fafafa"}},{default:Object(r["X"])((function(){return[Object(r["n"])(b,{style:Object(r["v"])({backgroundColor:i.componentColors.get("primary-color"),color:"#ffffff"}),app:""},{default:Object(r["X"])((function(){return[l.isCanViewMenuButton?(Object(r["D"])(),Object(r["i"])(d,{key:0,onClick:t[0]||(t[0]=function(e){return p.drawer=!p.drawer}),style:Object(r["v"])({backgroundColor:l.colors.indigo.base})},null,8,["style"])):(Object(r["D"])(),Object(r["k"])("div",a)),Object(r["n"])(f,null,{default:Object(r["X"])((function(){return[Object(r["m"])(Object(r["O"])(l.appBarTitle),1)]})),_:1})]})),_:1},8,["style"]),Object(r["n"])(h,{modelValue:e.drawer,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.drawer=t}),absolute:"",temporary:""},{default:Object(r["X"])((function(){return[Object(r["l"])("section",c,[Object(r["l"])("ul",null,[(Object(r["D"])(!0),Object(r["k"])(r["a"],null,Object(r["I"])(e.items,(function(e){return Object(r["D"])(),Object(r["k"])("li",{class:"list-item",key:e.title,onClick:function(t){l.handleMenuClick(e.link)}},Object(r["O"])(e.title),9,o)})),128))])]),Object(r["l"])("section",u,[Object(r["l"])("ul",null,[Object(r["l"])("li",{class:"list-item",onClick:t[1]||(t[1]=function(){return l.logout&&l.logout.apply(l,arguments)})}," exit ")])])]})),_:1},8,["modelValue"]),Object(r["n"])(j,null,{default:Object(r["X"])((function(){return[Object(r["n"])(O,{fluid:""},{default:Object(r["X"])((function(){return[Object(r["n"])(m)]})),_:1})]})),_:1})]})),_:1})}n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("ac1f"),n("5319");var s=n("d7e5"),l=n("b3c1"),p=n("11fa"),d=n("9987"),f=n("aff0"),b=n("0ca2"),h=n("558e"),m=n("0eaa"),O=m["a"].indigo.base,j=m["a"].red.base,v=m["a"].yellow.darken3,g={name:"App",components:{VMain:s["a"],VApp:l["a"],VAppBar:p["a"],VContainer:d["a"],VAppBarNavIcon:f["a"],VNavigationDrawer:b["a"],VAppBarTitle:h["a"]},setup:function(){var e=Object(r["H"])((new Map).set("primary-color",O).set("warning-color",v).set("danger-color",j));return Object(r["E"])("component-colors",e),{componentColors:e}},computed:{colors:function(){return m["a"]},isCanViewMenuButton:function(){return"/login"!==this.$route.path},appBarTitle:function(){var e=(new Map).set("/home","Purchase list").set("/deposits","Deposits list").set("/login","Login");return e.get(this.$route.path)}},methods:{handleMenuClick:function(e){this.drawer=!this.drawer,this.$router.push(e)},logout:function(){this.drawer=!this.drawer,this.$router.replace("/login")}},data:function(){return{drawer:!1,group:null,items:[{title:"Purchases",icon:"mdi-view-dashboard",link:"/home"},{title:"Deposits",icon:"mdi-view-dashboard",link:"/deposits"}]}}},w=(n("db59"),n("6b0d")),k=n.n(w);const y=k()(g,[["render",i]]);var x=y,T=n("6c02"),C={class:"header-container"};function P(e,t,n,a,c,o){var u=Object(r["J"])("PurchaseForm"),i=Object(r["J"])("VDivider"),s=Object(r["J"])("purchase-list"),l=Object(r["J"])("pagination");return Object(r["D"])(),Object(r["k"])(r["a"],null,[Object(r["l"])("div",C,[Object(r["l"])("h1",null,"balance: "+Object(r["O"])(a.balance),1)]),Object(r["n"])(u,{"handle-create":a.addNewPurchase,"handle-update":a.updatePurchase},null,8,["handle-create","handle-update"]),Object(r["n"])(i),Object(r["n"])(s),a.purchaseCount>0?(Object(r["D"])(),Object(r["i"])(l,{key:0,"load-next-page":o.handleClickNextPage,"load-prev-page":o.handleClickPrevPage,"current-page":a.currentPage,count:a.purchaseCount},null,8,["load-next-page","load-prev-page","current-page","count"])):Object(r["j"])("",!0)],64)}var D=n("1da1"),S=(n("7db0"),n("b0c0"),n("99af"),n("96cf"),n("4b46")),R={class:"purchase-list-container container"};function V(e,t,n,a,c,o){var u=Object(r["J"])("transaction-element");return Object(r["D"])(),Object(r["k"])("div",R,[(Object(r["D"])(!0),Object(r["k"])(r["a"],null,Object(r["I"])(this.list,(function(e,t){return Object(r["D"])(),Object(r["i"])(u,{key:t,amount:e.amount,date:e.date,title:e.title,id:e.id,"delete-transaction":a.deletePurchase,"handle-update-click":o.handleUpdateClick},null,8,["amount","date","title","id","delete-transaction","handle-update-click"])})),128))])}var E={class:"transaction-title"},J={key:0,class:"transaction-setup-wrapper"},A={style:{width:"100px"}},N=Object(r["m"])(" edit "),_={style:{width:"100px"}},L=Object(r["m"])(" delete ");function B(e,t,n,a,c,o){var u=Object(r["J"])("v-card-title"),i=Object(r["J"])("v-card-subtitle"),s=Object(r["J"])("v-card-header-text"),l=Object(r["J"])("v-card-header"),p=Object(r["J"])("v-btn"),d=Object(r["J"])("v-card");return Object(r["D"])(),Object(r["k"])("div",{class:"transaction-element",onClick:t[2]||(t[2]=function(e){return c.viewSetupButtons=!c.viewSetupButtons})},[Object(r["n"])(d,{elevation:"1"},{default:Object(r["X"])((function(){return[Object(r["n"])(l,null,{default:Object(r["X"])((function(){return[Object(r["n"])(s,null,{default:Object(r["X"])((function(){return[Object(r["n"])(u,null,{default:Object(r["X"])((function(){return[Object(r["l"])("div",E,[Object(r["l"])("div",null,Object(r["O"])(n.title),1),Object(r["l"])("div",null,Object(r["O"])(n.amount)+" ₽",1)])]})),_:1}),Object(r["n"])(i,null,{default:Object(r["X"])((function(){return[Object(r["m"])(Object(r["O"])(o.dateToView),1)]})),_:1})]})),_:1})]})),_:1}),c.viewSetupButtons?(Object(r["D"])(),Object(r["k"])("div",J,[Object(r["l"])("div",A,[Object(r["n"])(p,{onClick:t[0]||(t[0]=function(){return n.handleUpdateClick(n.id)}),block:"",color:"#3f51b5",style:{color:"#ffffff"}},{default:Object(r["X"])((function(){return[N]})),_:1})]),Object(r["l"])("div",_,[Object(r["n"])(p,{onClick:t[1]||(t[1]=function(){return n.deleteTransaction(n.id)}),block:"",color:a.componentColors.get("danger-color"),style:{color:"#ffffff"}},{default:Object(r["X"])((function(){return[L]})),_:1},8,["color"])])])):Object(r["j"])("",!0)]})),_:1})])}n("a9e3");var I=n("d9a3"),X=n("7646"),F=n("2ef6"),M=n("d2ef"),U=n("ed10"),K=n("c7a0"),q={name:"transaction-element",setup:function(){return{componentColors:Object(r["r"])("component-colors")}},components:{VCard:I["a"],VCardHeader:X["a"],VCardTitle:F["a"],VCardSubtitle:M["a"],VCardHeaderText:U["a"],VBtn:K["a"]},props:{id:{type:Number,required:!0},date:{type:String,default:""},amount:{type:Number,default:0},title:{type:String,default:" - "},deleteTransaction:{type:Function,required:!0},handleUpdateClick:{type:Function,required:!0}},data:function(){return{viewSetupButtons:!1}},computed:{dateToView:function(){var e=new Date(this.date);return e.toLocaleString()}}};n("55f6");const H=k()(q,[["render",B]]);var z=H,$={name:"purchase-list",components:{TransactionElement:z},setup:function(){return{list:Object(r["r"])("purchase-list"),deletePurchase:Object(r["r"])("delete-purchase"),openModal:Object(r["r"])("set-show-purchase-form"),setTmpPurchase:Object(r["r"])("set-tmp-purchase")}},methods:{handleUpdateClick:function(e){var t=this.list.find((function(t){return t.id===e}));this.setTmpPurchase("title",t.title),this.setTmpPurchase("amount",t.amount),this.setTmpPurchase("id",t.id),this.openModal(!0)}}};n("3a85");const G=k()($,[["render",V]]);var Q=G,W=(n("e9c4"),n("d4ec")),Y=n("bee2"),Z="https://bookkepingapi.eu.ngrok.io/",ee=function(){function e(){Object(W["a"])(this,e),this.accessTokenLocalStorageKey="access",this.accessTokenExpireDateLocalStorageKey="expireDate",this.refreshTokenLocalStorageKey="refresh",this.refreshTokenExpireDateLocalStorageKey="expireRefreshTokenExpireDate",this.accessToken=this.getAccessToken(),this.refreshToken=this.getRefreshToken(),this.accessExipreDate=this.getAccessTokenExpireDate(),this.refreshExpireDate=this.getRefreshTokenExpireDate()}return Object(Y["a"])(e,[{key:"getAccessToken",value:function(){return localStorage.getItem(this.accessTokenLocalStorageKey)}},{key:"getRefreshToken",value:function(){return localStorage.getItem(this.refreshTokenLocalStorageKey)}},{key:"getRefreshTokenExpireDate",value:function(){var e=localStorage.getItem(this.refreshTokenExpireDateLocalStorageKey);return null===e?new Date:new Date(parseInt(e))}},{key:"getAccessTokenExpireDate",value:function(){var e=localStorage.getItem(this.accessTokenExpireDateLocalStorageKey);return null===e?new Date:new Date(parseInt(e))}},{key:"isAccessTokenValid",value:function(){if(null===this.accessToken)return!1;var e=new Date,t=this.getAccessTokenExpireDate()-e;return t>0}},{key:"isRefreshTokenValid",value:function(){if(null===this.refreshToken)return!1;var e=new Date,t=this.getRefreshTokenExpireDate()-e;return t>0}},{key:"updateAccessTokenContext",value:function(e){var t=new Date,n=new Date(t.getTime()+3e5),r=+new Date(n);localStorage.setItem(this.accessTokenLocalStorageKey,e),localStorage.setItem(this.accessTokenExpireDateLocalStorageKey,String(r))}},{key:"updateRefreshTokenContext",value:function(e){var t=new Date,n=new Date(t.getTime()+864e5),r=+new Date(n);localStorage.setItem(this.refreshTokenExpireDateLocalStorageKey,String(r)),localStorage.setItem(this.refreshTokenLocalStorageKey,e)}},{key:"updateTokens",value:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,c,o,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:function(){},n=u.length>1&&void 0!==u[1]?u[1]:function(){},e.prev=2,e.next=5,fetch("".concat(Z,"/api/token/refresh/"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:this.getRefreshToken()})});case 5:return r=e.sent,e.next=8,r.json();case 8:a=e.sent,c=a.access,o=a.refresh,"string"===typeof c&&"string"===typeof o?(this.updateAccessTokenContext(c),this.updateRefreshTokenContext(o),t()):n(),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](2),n();case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearTokens",value:function(){localStorage.removeItem(this.accessTokenLocalStorageKey),localStorage.removeItem(this.refreshTokenLocalStorageKey),localStorage.removeItem(this.accessTokenExpireDateLocalStorageKey),localStorage.removeItem(this.refreshTokenExpireDateLocalStorageKey)}}]),e}();function te(e,t,n){var r=new ee,a=r.isAccessTokenValid()&&r.isRefreshTokenValid(),c="Login"!==e.name;"/"===e.path?n("/home"):c&&a?r.updateTokens((function(){return n()}),(function(){return n({name:"Login"})})):n()}function ne(e,t){return re.apply(this,arguments)}function re(){return re=Object(D["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=new ee,e.prev=1,r.isRefreshTokenValid()||n(),r.isAccessTokenValid()||!r.isRefreshTokenValid()){e.next=6;break}return e.next=6,r.updateTokens();case 6:return e.next=8,t((function(){return r.getAccessToken()}),(function(){return r.clearTokens()}));case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e["catch"](1),console.info(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),re.apply(this,arguments)}var ae={get:function(e,t,n){return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ne(function(){var t=Object(D["a"])(regeneratorRuntime.mark((function t(r,a){var c,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(e),{method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(r())}});case 2:return c=t.sent,o=c.status,u=c.statusText,401===o&&"Unauthorized"===u&&(a(),n.push("/login")),t.next=7,c.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),(function(){return n.push("/login")}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},post:function(e,t,n){return Object(D["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,ne(function(){var r=Object(D["a"])(regeneratorRuntime.mark((function r(a,c){var o,u,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("".concat(e),{method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(a()),"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return o=r.sent,u=o.status,i=o.statusText,401===u&&"Unauthorized"===i&&(c(),n.push("/login")),r.next=7,o.json();case 7:return r.abrupt("return",r.sent);case 8:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),(function(){return n.push("/login")}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},put:function(e,t,n){return Object(D["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,ne(function(){var r=Object(D["a"])(regeneratorRuntime.mark((function r(a,c){var o,u,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("".concat(e),{method:"PUT",mode:"cors",headers:{Authorization:"Bearer ".concat(a()),"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return o=r.sent,u=o.status,i=o.statusText,401===u&&"Unauthorized"===i&&(c(),n.push("/login")),r.next=7,o.json();case 7:return r.abrupt("return",r.sent);case 8:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),(function(){return n.push("/login")}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},delete:function(e,t,n){return Object(D["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",ne(function(){var r=Object(D["a"])(regeneratorRuntime.mark((function r(a,c){var o,u,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("".concat(e).concat(t,"/"),{method:"delete",mode:"cors",headers:{Authorization:"Bearer ".concat(a()),"Content-Type":"application/json"}});case 2:return o=r.sent,u=o.status,i=o.statusText,401===u&&"Unauthorized"===i&&(c(),n.push("/login")),r.next=7,o.json();case 7:return r.abrupt("return",r.sent);case 8:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),(function(){return n.push("/login")})));case 1:case"end":return r.stop()}}),r)})))()}},ce=ae,oe={class:"add-button-form"},ue=Object(r["m"])("add "),ie={key:1,class:"modal"},se={class:"form-wrapper"},le={class:"form-purchase"},pe={class:"close-button"},de=Object(r["m"])(" x "),fe={class:"input-wrapper"},be={class:"input-wrapper"},he={class:"add-button"};function me(e,t,n,a,c,o){var u=Object(r["J"])("v-btn"),i=Object(r["J"])("material-input"),s=Object(r["J"])("v-card");return Object(r["D"])(),Object(r["k"])(r["a"],null,[Object(r["l"])("div",oe,[Object(r["n"])(u,{onClick:o.handleAddNewClick,color:a.componentColor.get("primary-color"),style:{color:"#fff"}},{default:Object(r["X"])((function(){return[ue]})),_:1},8,["onClick","color"])]),a.showPurchaseForm?(Object(r["D"])(),Object(r["k"])("div",{key:0,class:"overlay",onClick:t[0]||(t[0]=function(){return a.setShowPurchaseForm(!1)})})):Object(r["j"])("",!0),a.showPurchaseForm?(Object(r["D"])(),Object(r["k"])("div",ie,[Object(r["n"])(s,null,{default:Object(r["X"])((function(){return[Object(r["l"])("div",se,[Object(r["l"])("div",le,[Object(r["l"])("div",pe,[Object(r["n"])(u,{onClick:t[1]||(t[1]=function(){return a.setShowPurchaseForm(!1)}),style:{color:"#ffffff"},color:a.componentColor.get("danger-color")},{default:Object(r["X"])((function(){return[de]})),_:1},8,["color"])]),Object(r["l"])("div",fe,[Object(r["n"])(i,{value:o.amountValue,"input-mode":"numeric",type:"number",label:"cost ₽",updater:o.updateAmount},null,8,["value","updater"])]),Object(r["l"])("div",be,[Object(r["n"])(i,{value:o.titleValue,"input-mode":"verbatim",type:"text",label:"title",updater:o.updateTitle},null,8,["value","updater"])]),Object(r["l"])("div",he,[Object(r["n"])(u,{style:{color:"#ffffff"},color:a.componentColor.get("primary-color"),onClick:o.handleClick},{default:Object(r["X"])((function(){return[Object(r["m"])(Object(r["O"])(o.buttonLabel),1)]})),_:1},8,["color","onClick"])])])])]})),_:1})])):Object(r["j"])("",!0)],64)}var Oe={class:"material-input-container"},je={class:"material"},ve=["value","type","inputmode"],ge=Object(r["l"])("hr",null,null,-1);function we(e,t,n,a,c,o){return Object(r["D"])(),Object(r["k"])("div",Oe,[Object(r["l"])("fieldset",je,[Object(r["l"])("input",{value:n.value,type:n.type,autocomplete:"off",onInput:t[0]||(t[0]=function(){return n.updater&&n.updater.apply(n,arguments)}),inputmode:n.inputMode,required:""},null,40,ve),ge,Object(r["l"])("label",null,Object(r["O"])(n.label),1)])])}var ke={name:"material-input",props:{type:{type:String,required:!0},label:{type:String,required:!0},updater:{type:Function,required:!0},inputMode:{type:String,required:!0},value:{type:String,default:""}},computed:{colors:function(){return m["a"]}}};n("68a7");const ye=k()(ke,[["render",we]]);var xe=ye,Te={name:"purchase-form",components:{MaterialInput:xe,VCard:I["a"]},props:{handleCreate:{type:Function,required:!0},handleUpdate:{type:Function,required:!0}},setup:function(){return{componentColor:Object(r["r"])("component-colors"),showPurchaseForm:Object(r["r"])("show-purchase-form"),setShowPurchaseForm:Object(r["r"])("set-show-purchase-form"),setTmpPurchase:Object(r["r"])("set-tmp-purchase"),clearTmpPurchase:Object(r["r"])("clear-tmp-purchase"),tmpPurchase:Object(r["r"])("tmp-purchase")}},data:function(){return{showForm:!1}},methods:{updateTitle:function(e){this.setTmpPurchase("title",e.target.value)},updateAmount:function(e){this.setTmpPurchase("amount",e.target.value)},handleClick:function(){void 0===this.tmpPurchase.id?this.handleCreate():this.handleUpdate()},handleAddNewClick:function(){this.clearTmpPurchase(),this.setShowPurchaseForm(!0)}},computed:{amountValue:function(){return void 0===this.tmpPurchase.id?"":this.tmpPurchase.amount},titleValue:function(){return void 0===this.tmpPurchase.id?"":this.tmpPurchase.title},buttonLabel:function(){return void 0===this.tmpPurchase.id?"add":"update"}}};n("01fb");const Ce=k()(Te,[["render",me]]);var Pe=Ce,De={class:"pagination-container"},Se={class:"pagination-button-wrapper"},Re=Object(r["m"])(" prev "),Ve={class:"pagination-current-page-wrapper"},Ee={class:"pagination-button-wrapper"},Je=Object(r["m"])(" next ");function Ae(e,t,n,a,c,o){var u=Object(r["J"])("v-btn");return Object(r["D"])(),Object(r["k"])("div",De,[Object(r["l"])("div",Se,[Object(r["n"])(u,{style:{color:"#ffffff"},color:a.componentColor.get("primary-color"),disabled:!o.isCanViewPrevButton,onClick:n.loadPrevPage},{default:Object(r["X"])((function(){return[Re]})),_:1},8,["color","disabled","onClick"])]),Object(r["l"])("div",Ve,[Object(r["l"])("p",null,Object(r["O"])(n.currentPage),1)]),Object(r["l"])("div",Ee,[Object(r["n"])(u,{style:{color:"#ffffff"},color:a.componentColor.get("primary-color"),disabled:!o.isCanViewNextButton,onClick:n.loadNextPage},{default:Object(r["X"])((function(){return[Je]})),_:1},8,["color","disabled","onClick"])])])}var Ne={name:"pagination",setup:function(){return{componentColor:Object(r["r"])("component-colors")}},props:{loadNextPage:{type:Function,required:!0},loadPrevPage:{type:Function,required:!0},currentPage:{type:Number,required:!0},count:{type:Number,required:!0}},computed:{isCanViewNextButton:function(){return this.count-25*this.currentPage>0},isCanViewPrevButton:function(){return this.currentPage>1}}};n("a554");const _e=k()(Ne,[["render",Ae]]);var Le=_e,Be={name:"Home",components:{Pagination:Le,PurchaseForm:Pe,PurchaseList:Q,VDivider:S["a"]},setup:function(){var e=Object(T["c"])(),t=Object(r["H"])(!1),n=Object(r["H"])([]),a=Object(r["H"])(1),c=Object(r["H"])(0),o=Object(r["H"])(0),u=Object(r["H"])([]),i=Object(r["H"])({}),s=function(e){a.value=e},l=function(e,t){i.value[e]=t},p=function(){i.value={}},d=function(e){t.value=e},f=function(){var t=Object(D["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ce.get("".concat(Z,"/purchase-types/"),{},e);case 2:n=t.sent,r=n.results,u.value=r;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=Object(D["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ce.get("".concat(Z,"/balance/"),{},e);case 2:n=t.sent,r=n.results,o.value=r.find((function(e){return"General"===e.name})).mount;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=Object(D["a"])(regeneratorRuntime.mark((function t(r){var a,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ce.get("".concat(Z,"/purchases/?page=").concat(r),{},e);case 2:a=t.sent,o=a.results,u=a.count,c.value=u,n.value=o;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={title:i.value.title,amount:i.value.amount,id:i.value.id,date:new Date,description:""},e.next=3,ce.put("".concat(Z,"/purchases/").concat(i.value.id,"/"),n);case 3:return t.value=!1,e.next=6,h(a.value);case 6:return e.next=8,b();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={title:i.value.title,amount:i.value.amount,date:new Date,description:""},e.next=3,ce.post("".concat(Z,"/purchases/"),n);case 3:return t.value=!1,e.next=6,h(a.value);case 6:return e.next=8,b();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.delete("".concat(Z,"/purchases/"),t);case 2:return e.next=4,h(a.value);case 4:return e.next=6,b();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r["B"])((function(){h(a.value),b()})),Object(r["E"])("purchase-list",n),Object(r["E"])("delete-purchase",j),Object(r["E"])("current-page",a),Object(r["E"])("purchase-types",u),Object(r["E"])("load-purchase-types",f),Object(r["E"])("set-show-purchase-form",d),Object(r["E"])("show-purchase-form",t),Object(r["E"])("set-tmp-purchase",l),Object(r["E"])("clear-tmp-purchase",p),Object(r["E"])("tmp-purchase",i),{loadPurchaseList:h,currentPage:a,setCurrentPage:s,purchaseCount:c,balance:o,addNewPurchase:O,updatePurchase:m}},methods:{handleClickNextPage:function(){this.setCurrentPage(this.currentPage+1),this.loadPurchaseList(this.currentPage)},handleClickPrevPage:function(){this.setCurrentPage(this.currentPage-1),this.loadPurchaseList(this.currentPage)},handleExitButton:function(){localStorage.removeItem("refresh"),localStorage.removeItem("access"),localStorage.removeItem("expireDate"),this.$router.push("/login")}}};n("ad8e");const Ie=k()(Be,[["render",P]]);var Xe=Ie,Fe=["onsubmit"],Me={style:{width:"250px"}},Ue={style:{width:"250px"}},Ke={style:{width:"250px"}},qe=Object(r["m"])(" Sing UP ");function He(e,t,n,a,c,o){var u=Object(r["J"])("material-input"),i=Object(r["J"])("v-btn");return Object(r["D"])(),Object(r["k"])("form",{onsubmit:o.singUp,class:"login-form-container"},[Object(r["l"])("div",Me,[Object(r["n"])(u,{type:"text",label:"username",updater:a.updateUserName},null,8,["updater"])]),Object(r["l"])("div",Ue,[Object(r["n"])(u,{type:"password",label:"password",updater:a.updatePassword},null,8,["updater"])]),Object(r["l"])("div",Ke,[Object(r["n"])(i,{onClick:o.singUp,block:"",color:a.componentColors.get("primary-color"),style:{color:"#ffffff"}},{default:Object(r["X"])((function(){return[qe]})),_:1},8,["onClick","color"])])],8,Fe)}var ze={name:"Login",components:{MaterialInput:xe},setup:function(){var e=Object(r["H"])(""),t=Object(r["H"])(""),n=function(t){e.value=t.target.value},a=function(e){t.value=e.target.value};return{username:e,password:t,updatePassword:a,updateUserName:n,componentColors:Object(r["r"])("component-colors")}},methods:{singUp:function(e){var t=this;e.preventDefault(),fetch("".concat(Z,"/api/token/"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})}).then((function(e){var t=e.status;if(200===t)return e.json();throw new Error("wrong password")})).then((function(e){var n=e.refresh,r=e.access,a=new ee;a.updateAccessTokenContext(r),a.updateRefreshTokenContext(n),t.$router.replace("/home")})).catch((function(e){return console.info(e)}))}}};n("3049");const $e=k()(ze,[["render",He]]);var Ge=$e;function Qe(e,t,n,a,c,o){var u=Object(r["J"])("new-transaction"),i=Object(r["J"])("VDivider"),s=Object(r["J"])("deposits-list");return Object(r["D"])(),Object(r["k"])(r["a"],null,[Object(r["n"])(u,{"add-new":a.addDeposit},null,8,["add-new"]),Object(r["n"])(i),Object(r["n"])(s)],64)}var We={class:"new-transaction-button-container"},Ye={class:"new-transaction-input-container"},Ze={class:"input-wrapper"},et={class:"input-wrapper"},tt={class:"add-transaction"},nt=Object(r["m"])("add "),rt=Object(r["m"])(" cancel "),at={key:1},ct=Object(r["m"])(" add ");function ot(e,t,n,a,c,o){var u=Object(r["J"])("material-input"),i=Object(r["J"])("v-btn"),s=Object(r["J"])("v-card");return Object(r["D"])(),Object(r["k"])("div",We,[c.isAddNewTransaction?(Object(r["D"])(),Object(r["i"])(s,{key:0,elevation:"1"},{default:Object(r["X"])((function(){return[Object(r["l"])("div",Ye,[Object(r["l"])("div",Ze,[Object(r["n"])(u,{"input-mode":"numeric",type:"number",label:"cost ₽",updater:o.updateAmount},null,8,["updater"])]),Object(r["l"])("div",et,[Object(r["n"])(u,{"input-mode":"verbatim",type:"text",label:"title",updater:o.updateTitle},null,8,["updater"])]),Object(r["l"])("div",tt,[Object(r["n"])(i,{style:{color:"#ffffff"},onClick:o.addNewTransaction,color:a.componentColor.get("primary-color")},{default:Object(r["X"])((function(){return[nt]})),_:1},8,["onClick","color"]),Object(r["n"])(i,{color:a.componentColor.get("warning-color"),style:{color:"#ffffff"},onClick:t[0]||(t[0]=function(e){return c.isAddNewTransaction=!c.isAddNewTransaction})},{default:Object(r["X"])((function(){return[rt]})),_:1},8,["color"])])])]})),_:1})):(Object(r["D"])(),Object(r["k"])("div",at,[Object(r["n"])(i,{style:{color:"#ffffff"},color:a.componentColor.get("primary-color"),onClick:t[1]||(t[1]=function(e){return c.isAddNewTransaction=!c.isAddNewTransaction})},{default:Object(r["X"])((function(){return[ct]})),_:1},8,["color"])]))])}var ut={name:"new-transaction",components:{MaterialInput:xe},setup:function(){return{componentColor:Object(r["r"])("component-colors")}},props:{addNew:{type:Function,required:!0}},data:function(){return{isAddNewTransaction:!1,amount:"",title:""}},methods:{updateAmount:function(e){this.amount=e.target.value},updateTitle:function(e){this.title=e.target.value},addNewTransaction:function(){this.isAddNewTransaction=!1,this.addNew(this.title,this.amount,new Date),this.amount="",this.title=""}}};n("50fe");const it=k()(ut,[["render",ot]]);var st=it,lt={class:"purchase-list-container container"};function pt(e,t,n,a,c,o){var u=Object(r["J"])("transaction-element");return Object(r["D"])(),Object(r["k"])("div",lt,[(Object(r["D"])(!0),Object(r["k"])(r["a"],null,Object(r["I"])(this.list,(function(e,t){return Object(r["D"])(),Object(r["i"])(u,{key:t,amount:e.amount,date:e.date,title:e.title,id:e.id,"delete-transaction":a.deleteDeposit},null,8,["amount","date","title","id","delete-transaction"])})),128))])}var dt={name:"deposits-list",components:{TransactionElement:z},setup:function(){return{list:Object(r["r"])("deposits-list"),deleteDeposit:Object(r["r"])("delete-deposit")}}};n("3fa2");const ft=k()(dt,[["render",pt]]);var bt=ft,ht={components:{DepositsList:bt,NewTransaction:st,VDivider:S["a"]},setup:function(){var e=Object(T["c"])(),t=Object(r["H"])([]),n=function(){var n=Object(D["a"])(regeneratorRuntime.mark((function n(r){var a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ce.get("".concat(Z,"/deposits/?page=").concat(r),{},e);case 2:a=n.sent,c=a.results,t.value=c;case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),a=function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(t,r,a){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c={title:t,amount:r,date:a,description:""},e.next=3,ce.post("".concat(Z,"/deposits/"),c);case 3:return e.next=5,n(1);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),c=function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ce.delete("".concat(Z,"/deposits/"),t);case 2:return e.next=4,n(1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r["B"])((function(){n(1)})),Object(r["E"])("deposits-list",t),Object(r["E"])("delete-deposit",c),{addDeposit:a}}};const mt=k()(ht,[["render",Qe]]);var Ot=mt,jt=[{path:"/home",name:"Home",component:Xe},{path:"/login",name:"Login",component:Ge},{path:"/deposits",name:"Deposits",component:Ot}],vt=Object(T["a"])({history:Object(T["b"])(),routes:jt}),gt=vt,wt=(n("5363"),n("98c5"),n("afc9")),kt=n("81c6"),yt=n("0047"),xt=Object(wt["a"])({theme:{dark:!1,colors:{background:"#fafafa",surface:"#fafafa",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"}},components:kt,directives:yt});gt.beforeEach((function(e,t,n){return te(e,t,n)})),Object(r["h"])(x).use(gt).use(xt).mount("#app")},"68a7":function(e,t,n){"use strict";n("1043")},7136:function(e,t,n){},"7ccc":function(e,t,n){},a554:function(e,t,n){"use strict";n("cab4")},ad8e:function(e,t,n){"use strict";n("7136")},b193:function(e,t,n){},b42a:function(e,t,n){},cab4:function(e,t,n){},db59:function(e,t,n){"use strict";n("2583")},f695:function(e,t,n){},f7a86:function(e,t,n){}});
//# sourceMappingURL=app.3ecd6da8.js.map